<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Dashboard ‚Äî HedgeIQ</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="./styles/dashboard.css">
  <style>
    /* ========== RESET & BASE ========== */
    *, *::before, *::after {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    html {
      scroll-behavior: smooth;
      overflow-x: hidden;
    }

    body {
      font-family: 'DM Sans', sans-serif;
      background: #0a0e17;
      color: #fff;
      min-height: 100vh;
      overflow-x: hidden;
      width: 100%;
    }

    /* ========== SIDEBAR ========== */
    .sidebar {
      position: fixed;
      left: 0;
      top: 0;
      height: 100vh;
      width: 240px;
      background: #0f1420;
      border-right: 1px solid rgba(255, 255, 255, 0.1);
      display: flex;
      flex-direction: column;
      padding: 20px 16px;
      z-index: 1000;
      transition: transform 0.3s ease;
    }

    .sidebar-logo {
      display: flex;
      align-items: center;
      gap: 4px;
      font-size: 1.3rem;
      font-weight: 700;
      margin-bottom: 32px;
      text-decoration: none;
      color: inherit;
    }

    .logo-sigma {
      color: #00d4ff;
      font-size: 1.5rem;
    }

    .logo-arrow {
      color: #00d4ff;
      font-size: 0.9rem;
      margin-left: 2px;
    }

    .sidebar-nav {
      flex: 1;
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .nav-item {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 12px 14px;
      border-radius: 8px;
      color: rgba(255, 255, 255, 0.6);
      text-decoration: none;
      font-size: 0.9rem;
      font-weight: 500;
      transition: all 0.2s;
    }

    .nav-item:hover {
      background: rgba(255, 255, 255, 0.05);
      color: #fff;
    }

    .nav-item.active {
      background: rgba(0, 212, 255, 0.1);
      color: #00d4ff;
    }

    .sidebar-footer {
      padding-top: 16px;
      border-top: 1px solid rgba(255, 255, 255, 0.1);
      margin-top: auto;
    }

    .user-info {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    /* FIXED AVATAR - Clean circular design */
    .user-avatar {
      width: 36px;
      height: 36px;
      min-width: 36px;
      border-radius: 50%;
      background: #00d4ff;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
      font-size: 14px;
      color: #0a0e17;
    }

    .user-details {
      display: flex;
      flex-direction: column;
      min-width: 0;
      flex: 1;
    }

    .user-name {
      color: #fff;
      font-weight: 600;
      font-size: 0.8rem;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      max-width: 140px;
    }

    .user-plan {
      color: rgba(255, 255, 255, 0.5);
      font-size: 0.7rem;
    }

    .sign-out-btn {
      margin-top: 12px;
      width: 100%;
      padding: 8px;
      background: rgba(239, 68, 68, 0.1);
      border: 1px solid rgba(239, 68, 68, 0.3);
      color: #ef4444;
      border-radius: 6px;
      cursor: pointer;
      font-size: 0.8rem;
      font-weight: 500;
      transition: all 0.2s;
    }

    .sign-out-btn:hover {
      background: rgba(239, 68, 68, 0.2);
    }

    /* ========== MAIN CONTENT ========== */
    .main-content {
      margin-left: 240px;
      padding: 24px;
      min-height: 100vh;
      width: calc(100% - 240px);
      max-width: calc(100vw - 240px);
    }

    .dashboard-section {
      margin-bottom: 48px;
      scroll-margin-top: 80px;
    }

    .dashboard-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
      gap: 16px;
      margin-bottom: 24px;
    }

    .header-left {
      display: flex;
      align-items: center;
      gap: 16px;
      flex-wrap: wrap;
    }

    .header-left h1 {
      font-size: 1.8rem;
      font-weight: 700;
    }

    .header-right {
      display: flex;
      align-items: center;
      gap: 16px;
      flex-wrap: wrap;
    }

    /* ========== MOBILE MENU ========== */
    .mobile-menu-btn {
      display: none;
      position: fixed;
      top: 12px;
      left: 12px;
      z-index: 1001;
      background: #0f1420;
      border: 1px solid rgba(255, 255, 255, 0.2);
      color: #fff;
      width: 44px;
      height: 44px;
      border-radius: 8px;
      cursor: pointer;
      align-items: center;
      justify-content: center;
    }

    .sidebar-overlay {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.7);
      z-index: 999;
    }

    .sidebar-overlay.open {
      display: block;
    }

    /* ========== COMPONENTS ========== */
    .gamma-chart-container {
      background: rgba(255, 255, 255, 0.02);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 12px;
      padding: 24px;
      margin: 24px 0;
      height: 400px;
      position: relative;
    }
    
    .zero-gamma-card {
      background: linear-gradient(135deg, rgba(168, 85, 247, 0.1), rgba(236, 72, 153, 0.1));
      border: 1px solid rgba(168, 85, 247, 0.3);
      border-radius: 12px;
      padding: 24px;
      margin: 24px 0;
      text-align: center;
    }
    
    .zero-gamma-card h3 {
      color: #a855f7;
      font-size: 0.85rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin-bottom: 12px;
    }
    
    .zero-gamma-price {
      font-size: 2.5rem;
      font-weight: 700;
      color: #fff;
      margin: 12px 0;
    }
    
    .zero-gamma-desc {
      color: rgba(255, 255, 255, 0.6);
      font-size: 0.9rem;
      margin-top: 12px;
    }
    
    .concentration-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 16px;
      margin: 24px 0;
    }
    
    .concentration-card {
      background: rgba(255, 255, 255, 0.02);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 12px;
      padding: 20px;
    }
    
    .concentration-label {
      color: rgba(255, 255, 255, 0.6);
      font-size: 0.85rem;
      margin-bottom: 8px;
    }
    
    .concentration-value {
      font-size: 1.8rem;
      font-weight: 700;
      color: #fff;
    }
    
    .concentration-bar {
      height: 8px;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 4px;
      margin-top: 12px;
      overflow: hidden;
    }
    
    .concentration-fill {
      height: 100%;
      background: linear-gradient(90deg, #00d4ff, #a855f7);
      border-radius: 4px;
      transition: width 0.3s ease;
    }
    
    .heatmap-container {
      background: rgba(255, 255, 255, 0.02);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 12px;
      padding: 24px;
      margin: 24px 0;
      height: 350px;
    }
    
    .settings-grid {
      display: grid;
      gap: 24px;
      margin: 24px 0;
    }
    
    .settings-card {
      background: rgba(255, 255, 255, 0.02);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 12px;
      padding: 24px;
    }
    
    .settings-card h3 {
      color: #fff;
      font-size: 1.1rem;
      margin-bottom: 16px;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .settings-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 16px 0;
      border-bottom: 1px solid rgba(255, 255, 255, 0.05);
      flex-wrap: wrap;
      gap: 12px;
    }
    
    .settings-row:last-child {
      border-bottom: none;
    }
    
    .settings-label {
      color: rgba(255, 255, 255, 0.9);
      font-weight: 500;
    }
    
    .settings-value {
      color: rgba(255, 255, 255, 0.6);
      font-size: 0.9rem;
    }
    
    .tier-badge-large {
      display: inline-block;
      padding: 6px 16px;
      border-radius: 6px;
      font-weight: 600;
      font-size: 0.9rem;
    }
    
    .tier-badge-large.pro {
      background: rgba(168, 85, 247, 0.2);
      color: #a855f7;
      border: 1px solid rgba(168, 85, 247, 0.3);
    }
    
    .tier-badge-large.free {
      background: rgba(255, 255, 255, 0.1);
      color: rgba(255, 255, 255, 0.7);
      border: 1px solid rgba(255, 255, 255, 0.2);
    }

    .learning-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 16px;
      margin: 24px 0;
    }

    .learning-card {
      background: rgba(255, 255, 255, 0.02);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 12px;
      padding: 24px;
      transition: all 0.2s;
      cursor: pointer;
      text-decoration: none;
    }

    .learning-card:hover {
      background: rgba(255, 255, 255, 0.04);
      border-color: rgba(0, 212, 255, 0.3);
      transform: translateY(-2px);
    }

    .learning-card-icon {
      width: 48px;
      height: 48px;
      border-radius: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.5rem;
      margin-bottom: 16px;
    }

    .learning-card-icon.gex { background: rgba(0, 212, 255, 0.1); border: 1px solid rgba(0, 212, 255, 0.3); color: #fff; }
.learning-card-icon.vanna { background: rgba(168, 85, 247, 0.1); border: 1px solid rgba(168, 85, 247, 0.3); color: #fff; }
.learning-card-icon.charm { background: rgba(236, 72, 153, 0.1); border: 1px solid rgba(236, 72, 153, 0.3); color: #fff; }
.learning-card-icon.maxpain { background: rgba(251, 191, 36, 0.1); border: 1px solid rgba(251, 191, 36, 0.3); color: #fff; }

    .learning-card h4 { color: #fff; font-size: 1.1rem; margin-bottom: 8px; }
    .learning-card p { color: rgba(255, 255, 255, 0.6); font-size: 0.9rem; line-height: 1.5; }
    .learning-card .read-more { color: #00d4ff; font-size: 0.85rem; font-weight: 600; margin-top: 12px; display: inline-block; }

    .dealer-gex-container {
      background: rgba(255, 255, 255, 0.02);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 12px;
      padding: 24px;
      margin: 24px 0;
    }

    .dealer-gex-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 16px;
      flex-wrap: wrap;
      gap: 12px;
    }

    .dealer-gex-title { color: #fff; font-size: 1rem; font-weight: 600; }

    .dealer-gex-legend {
      display: flex;
      gap: 16px;
      font-size: 0.8rem;
      flex-wrap: wrap;
    }

    .legend-item { display: flex; align-items: center; gap: 6px; color: rgba(255, 255, 255, 0.6); }
    .legend-dot { width: 10px; height: 10px; border-radius: 2px; }
    .legend-dot.positive { background: #10b981; }
    .legend-dot.negative { background: #ef4444; }

    .dealer-gex-chart { height: 300px; position: relative; }

    .dealer-gex-insight {
      background: rgba(168, 85, 247, 0.1);
      border: 1px solid rgba(168, 85, 247, 0.3);
      border-radius: 8px;
      padding: 12px 16px;
      margin-top: 16px;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .dealer-gex-insight span { color: rgba(255, 255, 255, 0.9); font-size: 0.9rem; }

    .section-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 16px;
      flex-wrap: wrap;
      gap: 12px;
    }

    .section-title {
      display: flex;
      align-items: center;
      gap: 8px;
      font-weight: 600;
      color: #fff;
    }

    .section-icon { font-size: 1.1rem; }

    /* ========== TABLET (1024px) ========== */
    @media (max-width: 1024px) {
      .main-content {
        padding: 20px;
      }
      
      .gamma-chart-container,
      .heatmap-container {
        height: 320px;
        padding: 16px;
      }
      
      .dealer-gex-chart {
        height: 260px;
      }
      
      .concentration-grid {
        grid-template-columns: 1fr 1fr;
      }
    }

    /* ========== MOBILE (768px) ========== */
    @media (max-width: 768px) {
      .mobile-menu-btn {
        display: flex;
      }
      
      .sidebar {
        transform: translateX(-100%);
      }
      
      .sidebar.open {
        transform: translateX(0);
      }
      
      .main-content {
        margin-left: 0;
        width: 100%;
        max-width: 100vw;
        padding: 70px 16px 24px 16px;
      }
      
      .header-left h1 {
        font-size: 1.4rem;
      }
      
      .dashboard-header {
        flex-direction: column;
        align-items: flex-start;
      }
      
      .header-right {
        width: 100%;
      }
      
      .concentration-grid {
        grid-template-columns: 1fr;
      }
      
      .gamma-chart-container,
      .heatmap-container {
        height: 280px;
        padding: 12px;
      }
      
      .dealer-gex-chart {
        height: 220px;
      }
      
      .zero-gamma-price {
        font-size: 1.8rem;
      }
      
      .zero-gamma-card {
        padding: 16px;
      }
      
      .learning-grid {
        grid-template-columns: 1fr;
      }
      
      .learning-card {
        padding: 16px;
      }
      
      .settings-row {
        flex-direction: column;
        align-items: flex-start;
      }
      
      .section-header {
        flex-direction: column;
        align-items: flex-start;
      }
      
      .dealer-gex-header {
        flex-direction: column;
        align-items: flex-start;
      }
      
      .dealer-gex-legend {
        font-size: 0.7rem;
      }
      
      .user-name {
        max-width: 130px;
      }
    }

    /* ========== SMALL MOBILE (480px) ========== */
    @media (max-width: 480px) {
      .main-content {
        padding: 60px 12px 20px 12px;
      }
      
      .header-left h1 {
        font-size: 1.2rem;
      }
      
      .gamma-chart-container,
      .heatmap-container,
      .dealer-gex-chart {
        height: 200px;
      }
      
      .zero-gamma-price {
        font-size: 1.5rem;
      }
      
      .concentration-value {
        font-size: 1.3rem;
      }
      
      .settings-card {
        padding: 16px;
      }
      
      .learning-card h4 {
        font-size: 1rem;
      }
      
      .learning-card p {
        font-size: 0.85rem;
      }
    }
  </style>
</head>
<body>
  <!-- Mobile Menu Button -->
  <button class="mobile-menu-btn" id="mobileMenuBtn" onclick="toggleSidebar()">
    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </button>

  <!-- Sidebar Overlay -->
  <div class="sidebar-overlay" id="sidebarOverlay" onclick="toggleSidebar()"></div>

  <!-- Sidebar -->
  <aside class="sidebar" id="sidebar">
    <a href="index.html" class="sidebar-logo">
      <span class="logo-sigma">Œ£</span>HedgeIQ<span class="logo-arrow">‚Üó</span>
    </a>
    <nav class="sidebar-nav">
      <a href="#overview" class="nav-item active" onclick="closeSidebarOnMobile()">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <rect x="3" y="3" width="7" height="7"></rect>
          <rect x="14" y="3" width="7" height="7"></rect>
          <rect x="14" y="14" width="7" height="7"></rect>
          <rect x="3" y="14" width="7" height="7"></rect>
        </svg>
        Dashboard
      </a>
      <a href="#gex-analysis" class="nav-item" onclick="closeSidebarOnMobile()">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <polyline points="22,12 18,12 15,21 9,3 6,12 2,12"/>
        </svg>
        GEX Analysis
      </a>
      <a href="#vanna-charm" class="nav-item" onclick="closeSidebarOnMobile()">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="12" r="10"></circle>
          <path d="M12 6v6l4 2"></path>
        </svg>
        Vanna & Charm
      </a>
      <a href="#learning" class="nav-item" onclick="closeSidebarOnMobile()">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path>
          <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path>
        </svg>
        Learning
      </a>
      <a href="#settings" class="nav-item" onclick="closeSidebarOnMobile()">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="12" r="3"></circle>
          <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path>
        </svg>
        Settings
      </a>
    </nav>
    <div class="sidebar-footer">
      <div class="user-info">
        <div class="user-avatar" id="userAvatar">?</div>
        <div class="user-details">
          <span class="user-name" id="userName">Loading...</span>
          <span class="user-plan" id="userPlan">Free Plan</span>
        </div>
      </div>
      <button class="sign-out-btn" onclick="window.signOut()">Sign Out</button>
    </div>
  </aside>

  <!-- Main Content -->
  <main class="main-content">
    <!-- ========== OVERVIEW SECTION ========== -->
    <section id="overview" class="dashboard-section">
      <header class="dashboard-header">
        <div class="header-left">
          <h1>Dashboard</h1>
          <div class="asset-selector">
            <button class="asset-btn active" data-asset="BTC">BTC</button>
            <button class="asset-btn" data-asset="ETH" onclick="alert('ETH support coming soon!')">ETH</button>
          </div>
        </div>
        <div class="header-right">
          <div class="mode-toggle">
            <span class="mode-label">Advanced</span>
            <label class="toggle-switch">
              <input type="checkbox" id="advancedModeToggle">
              <span class="toggle-slider"></span>
            </label>
          </div>
          <div class="update-info">
            <div class="last-updated">
              <span class="update-dot"></span>
              <span id="lastUpdated">Loading...</span>
            </div>
            <div class="next-update" id="nextUpdate">Next update in: --</div>
          </div>
          <button class="refresh-btn" id="refreshBtn">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polyline points="23 4 23 10 17 10"></polyline>
              <path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"></path>
            </svg>
            Refresh
          </button>
        </div>
      </header>

      <section class="regime-banner" id="regimeBanner">
        <div class="regime-icon">‚ö°</div>
        <div class="regime-content">
          <span class="regime-label">Market Regime:</span>
          <span class="regime-value" id="regimeValue">Loading...</span>
        </div>
        <div class="regime-description" id="regimeDescription">--</div>
      </section>

      <section class="metrics-grid">
        <div class="metric-card">
          <div class="metric-icon gex">Œì</div>
          <div class="metric-info">
            <span class="metric-label">Net GEX</span>
            <span class="metric-value" id="netGexValue">--</span>
            <span class="metric-subtext" id="netGexDesc">Loading...</span>
          </div>
        </div>
        <div class="metric-card">
          <div class="metric-icon vanna">ŒΩ</div>
          <div class="metric-info">
            <span class="metric-label">Net Vanna</span>
            <span class="metric-value" id="netVannaValue">--</span>
            <span class="metric-subtext" id="netVannaDesc">Loading...</span>
          </div>
        </div>
        <div class="metric-card">
          <div class="metric-icon charm">Œò</div>
          <div class="metric-info">
            <span class="metric-label">Net Charm</span>
            <span class="metric-value" id="netCharmValue">--</span>
            <span class="metric-subtext" id="netCharmDesc">Loading...</span>
          </div>
        </div>
        <div class="metric-card">
          <div class="metric-icon maxpain">‚óé</div>
          <div class="metric-info">
            <span class="metric-label">Max Pain</span>
            <span class="metric-value" id="maxPainValue">--</span>
            <span class="metric-subtext" id="maxPainDesc">Loading...</span>
          </div>
        </div>
      </section>

      <section class="chart-section">
        <div class="section-header">
          <div class="section-title">
            <span class="section-icon">üìä</span>
            <span id="chartTitle">Price & Key Levels</span>
          </div>
          <div class="chart-tabs">
            <button class="chart-tab active" data-period="1D">1D</button>
          </div>
        </div>
        <div class="chart-wrapper">
          <canvas id="priceChart"></canvas>
        </div>
      </section>

      <section class="levels-section" id="simpleModeSection">
        <div class="section-header">
          <div class="section-title">
            <span class="section-icon">üéØ</span>
            Key Levels
          </div>
          <div class="levels-filter">
            <button class="filter-btn active" data-filter="all">All</button>
            <button class="filter-btn" data-filter="support">Support</button>
            <button class="filter-btn" data-filter="resistance">Resistance</button>
          </div>
        </div>
        <div class="levels-table">
          <div class="table-header">
            <span>Level</span>
            <span>Type</span>
            <span>Confluence</span>
            <span>Signal</span>
            <span>Strength</span>
          </div>
          <div class="table-body" id="levelsTableBody">
            <div class="loading-row">
              <span class="loading-spinner"></span>
              <span>Loading levels...</span>
            </div>
          </div>
        </div>
      </section>

      <section class="levels-section" id="advancedModeSection" style="display: none;">
        <div class="section-header">
          <div class="section-title">
            <span class="section-icon">üìà</span>
            Raw Greeks Data
          </div>
          <div class="levels-filter">
            <button class="filter-btn active" data-filter="all">All</button>
            <button class="filter-btn" data-filter="support">Support</button>
            <button class="filter-btn" data-filter="resistance">Resistance</button>
          </div>
        </div>
        <div class="levels-table advanced">
          <div class="table-header advanced">
            <span>Strike</span>
            <span>Type</span>
            <span>GEX</span>
            <span>Vanna</span>
            <span>Charm</span>
            <span>OI</span>
            <span>Volume</span>
            <span>Score</span>
          </div>
          <div class="table-body" id="advancedTableBody">
            <div class="loading-row">
              <span class="loading-spinner"></span>
              <span>Loading data...</span>
            </div>
          </div>
        </div>
      </section>
    </section>

    <!-- ========== GEX ANALYSIS SECTION ========== -->
    <section id="gex-analysis" class="dashboard-section">
      <header class="dashboard-header">
        <div class="header-left">
          <h1>GEX Analysis</h1>
          <p style="color: rgba(255,255,255,0.6); font-size: 0.9rem; margin-top: 8px;">The Institutional Wall ‚Äî Dealer Hedging Gravity</p>
        </div>
      </header>

      <div class="zero-gamma-card">
        <h3>‚ö° Zero Gamma Strike (Flip Zone)</h3>
        <div class="zero-gamma-price" id="zeroGammaStrike">Loading...</div>
        <div class="zero-gamma-desc">Most important level for day traders. Volatility expands below, compresses above.</div>
      </div>

      <div class="concentration-grid">
        <div class="concentration-card">
          <div class="concentration-label">GEX Concentration at Spot</div>
          <div class="concentration-value" id="gexConcentration">--</div>
          <div class="concentration-bar">
            <div class="concentration-fill" id="gexConcentrationFill" style="width: 0%;"></div>
          </div>
        </div>
        <div class="concentration-card">
          <div class="concentration-label">Market Status</div>
          <div class="concentration-value" id="marketStatus" style="font-size: 1.3rem; color: #a855f7;">--</div>
          <p id="marketStatusDesc" style="color: rgba(255,255,255,0.5); font-size: 0.85rem; margin-top: 8px;">Loading market status...</p>
        </div>
      </div>

      <div class="dealer-gex-container">
        <div class="dealer-gex-header">
          <div class="dealer-gex-title">‚óè Dealer Gamma Exposure by Strike</div>
          <div class="dealer-gex-legend">
            <div class="legend-item"><div class="legend-dot positive"></div><span>Long Gamma (suppresses volatility)</span></div>
            <div class="legend-item"><div class="legend-dot negative"></div><span>Short Gamma (amplifies moves)</span></div>
          </div>
        </div>
        <div class="dealer-gex-chart"><canvas id="dealerGexChart"></canvas></div>
        <div class="dealer-gex-insight">
          <span>‚ö°</span>
          <span id="dealerGexInsight">Loading dealer positioning insight...</span>
        </div>
      </div>

      <div class="section-header">
        <div class="section-title">
          <span class="section-icon">üìä</span>
          Gamma Profile ‚Äî Call Walls & Put Walls
        </div>
      </div>
      <div class="gamma-chart-container"><canvas id="gammaProfileChart"></canvas></div>
    </section>

    <!-- ========== VANNA & CHARM SECTION ========== -->
    <section id="vanna-charm" class="dashboard-section">
      <header class="dashboard-header">
        <div class="header-left">
          <h1>Vanna & Charm</h1>
          <p style="color: rgba(255,255,255,0.6); font-size: 0.9rem; margin-top: 8px;">Market Timing ‚Äî Hidden Flows That Drive Price</p>
        </div>
      </header>

      <div class="section-header">
        <div class="section-title"><span class="section-icon">üî•</span>Vanna Heatmap ‚Äî IV Flow</div>
      </div>
      <div class="heatmap-container"><canvas id="vannaHeatmap"></canvas></div>

      <div class="section-header">
        <div class="section-title"><span class="section-icon">‚è±Ô∏è</span>Charm Decay Curve ‚Äî Time Flow</div>
      </div>
      <div class="gamma-chart-container"><canvas id="charmCurveChart"></canvas></div>

      <div class="section-header">
        <div class="section-title"><span class="section-icon">üìà</span>Spot-Volatility Correlation</div>
      </div>
      <div class="gamma-chart-container"><canvas id="spotVolChart"></canvas></div>
    </section>

    <!-- ========== LEARNING SECTION ========== -->
    <section id="learning" class="dashboard-section">
      <header class="dashboard-header">
        <div class="header-left">
          <h1>Learning Center</h1>
          <p style="color: rgba(255,255,255,0.6); font-size: 0.9rem; margin-top: 8px;">Master the Greeks ‚Äî Understand Market Mechanics</p>
        </div>
      </header>

      <div class="zero-gamma-card" style="text-align: center; padding: 3rem 2rem;">
        <h3 style="font-size: 1.5rem; margin-bottom: 1rem;">üìö Learn How to Read Options Flow</h3>
        <p style="color: rgba(255,255,255,0.7); font-size: 1rem; max-width: 600px; margin: 0 auto 2rem auto; line-height: 1.6;">
          New to options Greeks? No problem. We offer free educational resources that break down GEX, Vanna, Charm, and Max Pain. 
          Learn how dealer positioning creates invisible support and resistance levels that drive price action.
        </p>
        <a href="https://hedgeiq.netlify.app/learning" class="btn btn-primary btn-large" style="display: inline-block; padding: 1rem 2.5rem; background: #00d4ff; color: #0a0e17; text-decoration: none; border-radius: 8px; font-weight: 600; font-size: 1rem; transition: all 0.2s;">
          Explore Learning Center ‚Üí
        </a>
      </div>
    </section>

    <!-- ========== SETTINGS SECTION ========== -->
    <section id="settings" class="dashboard-section">
      <header class="dashboard-header">
        <div class="header-left">
          <h1>Settings</h1>
          <p style="color: rgba(255,255,255,0.6); font-size: 0.9rem; margin-top: 8px;">Account & Preferences</p>
        </div>
      </header>

      <div class="settings-grid">
        <div class="settings-card">
          <h3>
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
              <circle cx="12" cy="7" r="4"></circle>
            </svg>
            Subscription
          </h3>
          <div class="settings-row">
            <div>
              <div class="settings-label">Current Plan</div>
              <div class="settings-value">Access to all premium features</div>
            </div>
            <span class="tier-badge-large pro" id="settingsTierBadge">PRO PLAN</span>
          </div>
          <div class="settings-row">
            <div class="settings-label">Billing Cycle</div>
            <div class="settings-value">Monthly ‚Ä¢ Renews Jan 15, 2025</div>
          </div>
          <div class="settings-row">
            <div class="settings-label">Email</div>
            <div class="settings-value" id="settingsEmail">Loading...</div>
          </div>
        </div>

        <div class="settings-card">
          <h3>
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polyline points="23 4 23 10 17 10"></polyline>
              <path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"></path>
            </svg>
            Data Refresh
          </h3>
          <div class="settings-row">
            <div>
              <div class="settings-label">Refresh Mode</div>
              <div class="settings-value">Pro users get real-time data updates</div>
            </div>
            <label class="toggle-switch">
              <input type="checkbox" id="realtimeToggle" checked>
              <span class="toggle-slider"></span>
            </label>
          </div>
          <div class="settings-row">
            <div class="settings-label">Current Interval</div>
            <div class="settings-value" id="refreshInterval">Every 1 minute (Real-time)</div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <!-- Loading Overlay -->
  <div class="loading-overlay hidden" id="loadingOverlay">
    <div class="loading-content">
      <div class="loading-spinner large"></div>
      <span>Updating...</span>
    </div>
  </div>

  <!-- Error Toast -->
  <div class="toast error" id="errorToast">
    <span class="toast-message"></span>
    <button class="toast-close">&times;</button>
  </div>

  <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="./scripts/auth.js"></script>
  <script src="./scripts/dashboard.js"></script>
  
  <script>
    // Mobile sidebar toggle
    function toggleSidebar() {
      document.getElementById('sidebar').classList.toggle('open');
      document.getElementById('sidebarOverlay').classList.toggle('open');
    }

    function closeSidebarOnMobile() {
      if (window.innerWidth <= 768) {
        document.getElementById('sidebar').classList.remove('open');
        document.getElementById('sidebarOverlay').classList.remove('open');
      }
    }

    // Nav active state on scroll
    document.addEventListener('DOMContentLoaded', () => {
      const sections = document.querySelectorAll('.dashboard-section');
      const navItems = document.querySelectorAll('.sidebar-nav .nav-item');
      
      function updateActiveNav() {
        let current = '';
        sections.forEach(section => {
          const sectionTop = section.offsetTop;
          if (window.pageYOffset >= sectionTop - 100) {
            current = section.getAttribute('id');
          }
        });
        
        navItems.forEach(item => {
          item.classList.remove('active');
          if (item.getAttribute('href') === '#' + current) {
            item.classList.add('active');
          }
        });
      }
      
      window.addEventListener('scroll', updateActiveNav);
      
      // Real-time toggle
      const realtimeToggle = document.getElementById('realtimeToggle');
      const refreshInterval = document.getElementById('refreshInterval');
      
      if (realtimeToggle) {
        realtimeToggle.addEventListener('change', (e) => {
          refreshInterval.textContent = e.target.checked 
            ? 'Every 1 minute (Real-time)' 
            : 'Every 15 minutes (Delayed)';
        });
      }
    });
  </script>
</body>
</html>